{"ast":null,"code":"import { call, all, takeLatest, put, select } from 'redux-saga/effects';\nimport api from '../../../services/api';\nimport { getInvestimentosSuccess } from './actions';\nimport { InvestimentoTypes } from './types';\n\nfunction* getInvestimentos() {\n  const investimentosData = yield call(api.get, '');\n  console.log(investimentosData.data.body);\n  const investimentos = JSON.parse(investimentosData.data.body);\n  console.log(investimentos);\n  yield put(getInvestimentosSuccess(investimentos));\n}\n\nfunction* addInvestimento({\n  payload\n}) {\n  const investimentos = yield select(state => state.investimento.investimentos);\n  const newInvestimento = {\n    opcao: payload.opcao,\n    valor: payload.valor,\n    data: payload.data\n  };\n  yield call(api.post, '', newInvestimento);\n  const updatedInvestimentos = [newInvestimento, ...investimentos];\n  yield put(getInvestimentosSuccess(updatedInvestimentos));\n}\n\nfunction* removeInvestimento({\n  payload\n}) {\n  const investimentos = yield select(state => state.investimento.investimentos);\n  const updatedInvestimentos = investimentos.filter(investimento => investimento._id != payload._id);\n  yield call(api.delete, payload._id);\n  yield put(getInvestimentosSuccess(updatedInvestimentos));\n}\n\nexport default all([takeLatest(InvestimentoTypes.GET_INVESTIMENTOS_REQUEST, getInvestimentos), takeLatest(InvestimentoTypes.ADD_INVESTIMENTO_REQUEST, addInvestimento), takeLatest(InvestimentoTypes.REMOVE_INVESTIMENTO_REQUEST, removeInvestimento)]);","map":{"version":3,"sources":["/home/beatriz/Documents/gorilapp/gorilapp_front/src/store/modules/investimento/sagas.tsx"],"names":["call","all","takeLatest","put","select","api","getInvestimentosSuccess","InvestimentoTypes","getInvestimentos","investimentosData","get","console","log","data","body","investimentos","JSON","parse","addInvestimento","payload","state","investimento","newInvestimento","opcao","valor","post","updatedInvestimentos","removeInvestimento","filter","_id","delete","GET_INVESTIMENTOS_REQUEST","ADD_INVESTIMENTO_REQUEST","REMOVE_INVESTIMENTO_REQUEST"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,UAApB,EAAgCC,GAAhC,EAAqCC,MAArC,QAAmD,oBAAnD;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,SAASC,uBAAT,QAAuC,WAAvC;AAKA,SAASC,iBAAT,QAAoD,SAApD;;AAEA,UAAUC,gBAAV,GAA6B;AACzB,QAAMC,iBAAiB,GAAG,MAAMT,IAAI,CAACK,GAAG,CAACK,GAAL,EAAU,EAAV,CAApC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,iBAAiB,CAACI,IAAlB,CAAuBC,IAAnC;AACA,QAAMC,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWR,iBAAiB,CAACI,IAAlB,CAAuBC,IAAlC,CAAtB;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYG,aAAZ;AACA,QAAMZ,GAAG,CAACG,uBAAuB,CAACS,aAAD,CAAxB,CAAT;AACH;;AAED,UAAUG,eAAV,CAA0B;AAACC,EAAAA;AAAD,CAA1B,EAA+C;AAC3C,QAAMJ,aAAa,GAAE,MAAMX,MAAM,CAAEgB,KAAD,IAA6BA,KAAK,CAACC,YAAN,CAAmBN,aAAjD,CAAjC;AACA,QAAMO,eAAe,GAAG;AACpBC,IAAAA,KAAK,EAAEJ,OAAO,CAACI,KADK;AAEpBC,IAAAA,KAAK,EAAEL,OAAO,CAACK,KAFK;AAGpBX,IAAAA,IAAI,EAAEM,OAAO,CAACN;AAHM,GAAxB;AAMA,QAAMb,IAAI,CAACK,GAAG,CAACoB,IAAL,EAAW,EAAX,EAAeH,eAAf,CAAV;AAEA,QAAMI,oBAAoB,GAAG,CAACJ,eAAD,EAAkB,GAAGP,aAArB,CAA7B;AACA,QAAMZ,GAAG,CAACG,uBAAuB,CAACoB,oBAAD,CAAxB,CAAT;AACH;;AAED,UAAUC,kBAAV,CAA6B;AAACR,EAAAA;AAAD,CAA7B,EAAkD;AAC9C,QAAMJ,aAAa,GAAG,MAAMX,MAAM,CAAEgB,KAAD,IAA6BA,KAAK,CAACC,YAAN,CAAmBN,aAAjD,CAAlC;AACA,QAAMW,oBAAoB,GAAGX,aAAa,CAACa,MAAd,CAAsBP,YAAD,IAAoCA,YAAY,CAACQ,GAAb,IAAkBV,OAAO,CAACU,GAAnF,CAA7B;AACA,QAAM7B,IAAI,CAACK,GAAG,CAACyB,MAAL,EAAaX,OAAO,CAACU,GAArB,CAAV;AACA,QAAM1B,GAAG,CAACG,uBAAuB,CAACoB,oBAAD,CAAxB,CAAT;AACH;;AAED,eAAezB,GAAG,CAAC,CACfC,UAAU,CAACK,iBAAiB,CAACwB,yBAAnB,EAA8CvB,gBAA9C,CADK,EAEfN,UAAU,CAACK,iBAAiB,CAACyB,wBAAnB,EAA6Cd,eAA7C,CAFK,EAGfhB,UAAU,CAACK,iBAAiB,CAAC0B,2BAAnB,EAAgDN,kBAAhD,CAHK,CAAD,CAAlB","sourcesContent":["import { call, all, takeLatest, put, select } from 'redux-saga/effects'\nimport api from '../../../services/api'\n\nimport { getInvestimentosSuccess} from './actions'\nimport { AnyAction } from 'redux'\n\nimport { ApplicationState } from '../../index'\n\nimport { InvestimentoTypes, InvestimentoData } from './types'\n\nfunction* getInvestimentos() {\n    const investimentosData = yield call(api.get, '')\n    console.log(investimentosData.data.body)\n    const investimentos = JSON.parse(investimentosData.data.body)\n    console.log(investimentos)\n    yield put(getInvestimentosSuccess(investimentos))\n}\n\nfunction* addInvestimento({payload}: AnyAction){\n    const investimentos= yield select((state: ApplicationState) => state.investimento.investimentos)\n    const newInvestimento = {\n        opcao: payload.opcao,\n        valor: payload.valor,\n        data: payload.data\n    }\n\n    yield call(api.post, '', newInvestimento)\n\n    const updatedInvestimentos = [newInvestimento, ...investimentos]    \n    yield put(getInvestimentosSuccess(updatedInvestimentos))\n}\n\nfunction* removeInvestimento({payload}: AnyAction){\n    const investimentos = yield select((state: ApplicationState) => state.investimento.investimentos )\n    const updatedInvestimentos = investimentos.filter((investimento: InvestimentoData) => investimento._id!=payload._id)\n    yield call(api.delete, payload._id)\n    yield put(getInvestimentosSuccess(updatedInvestimentos))\n}\n\nexport default all([\n    takeLatest(InvestimentoTypes.GET_INVESTIMENTOS_REQUEST, getInvestimentos),\n    takeLatest(InvestimentoTypes.ADD_INVESTIMENTO_REQUEST, addInvestimento),\n    takeLatest(InvestimentoTypes.REMOVE_INVESTIMENTO_REQUEST, removeInvestimento),\n  ])"]},"metadata":{},"sourceType":"module"}