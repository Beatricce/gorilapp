{"ast":null,"code":"import { call, all, takeLatest, put, select } from 'redux-saga/effects';\nimport api from '../../../services/api';\nimport { getInvestimentosSuccess } from './actions';\nimport { InvestimentoTypes } from './types';\n\nfunction* getInvestimentos() {\n  const investimentosData = yield call(api.get, '');\n  const investimentos = JSON.parse(investimentosData.data.body);\n  yield put(getInvestimentosSuccess(investimentos));\n}\n\nfunction* addInvestimento({\n  payload\n}) {\n  const investimentos = yield select(state => state.investimento.investimentos);\n  const newInvestimento = {\n    opcao: payload.opcao,\n    valor: payload.valor,\n    data: payload.data\n  };\n  yield call(api.post, '', newInvestimento);\n  const updatedInvestimentos = [newInvestimento, ...investimentos];\n  yield put(getInvestimentosSuccess(updatedInvestimentos));\n}\n\nfunction* removeInvestimento({\n  payload\n}) {\n  const investimentos = yield select(state => state.investimento.investimentos);\n  const updatedInvestimentos = investimentos.filter(investimento => investimento._id != payload._id);\n  yield call(api.delete, payload._id);\n  yield put(getInvestimentosSuccess(updatedInvestimentos));\n}\n\nexport default all([takeLatest(InvestimentoTypes.GET_INVESTIMENTOS_REQUEST, getInvestimentos), takeLatest(InvestimentoTypes.ADD_INVESTIMENTO_REQUEST, addInvestimento), takeLatest(InvestimentoTypes.REMOVE_INVESTIMENTO_REQUEST, removeInvestimento)]);","map":{"version":3,"sources":["/home/beatriz/Documents/gorilapp/gorilapp_front/src/store/modules/investimento/sagas.tsx"],"names":["call","all","takeLatest","put","select","api","getInvestimentosSuccess","InvestimentoTypes","getInvestimentos","investimentosData","get","investimentos","JSON","parse","data","body","addInvestimento","payload","state","investimento","newInvestimento","opcao","valor","post","updatedInvestimentos","removeInvestimento","filter","_id","delete","GET_INVESTIMENTOS_REQUEST","ADD_INVESTIMENTO_REQUEST","REMOVE_INVESTIMENTO_REQUEST"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,UAApB,EAAgCC,GAAhC,EAAqCC,MAArC,QAAmD,oBAAnD;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,SAASC,uBAAT,QAAuC,WAAvC;AAKA,SAASC,iBAAT,QAAoD,SAApD;;AAEA,UAAUC,gBAAV,GAA6B;AACzB,QAAMC,iBAAiB,GAAG,MAAMT,IAAI,CAACK,GAAG,CAACK,GAAL,EAAU,EAAV,CAApC;AACA,QAAMC,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWJ,iBAAiB,CAACK,IAAlB,CAAuBC,IAAlC,CAAtB;AACA,QAAMZ,GAAG,CAACG,uBAAuB,CAACK,aAAD,CAAxB,CAAT;AACH;;AAED,UAAUK,eAAV,CAA0B;AAACC,EAAAA;AAAD,CAA1B,EAA+C;AAC3C,QAAMN,aAAa,GAAE,MAAMP,MAAM,CAAEc,KAAD,IAA6BA,KAAK,CAACC,YAAN,CAAmBR,aAAjD,CAAjC;AACA,QAAMS,eAAe,GAAG;AACpBC,IAAAA,KAAK,EAAEJ,OAAO,CAACI,KADK;AAEpBC,IAAAA,KAAK,EAAEL,OAAO,CAACK,KAFK;AAGpBR,IAAAA,IAAI,EAAEG,OAAO,CAACH;AAHM,GAAxB;AAMA,QAAMd,IAAI,CAACK,GAAG,CAACkB,IAAL,EAAW,EAAX,EAAeH,eAAf,CAAV;AAEA,QAAMI,oBAAoB,GAAG,CAACJ,eAAD,EAAkB,GAAGT,aAArB,CAA7B;AACA,QAAMR,GAAG,CAACG,uBAAuB,CAACkB,oBAAD,CAAxB,CAAT;AACH;;AAED,UAAUC,kBAAV,CAA6B;AAACR,EAAAA;AAAD,CAA7B,EAAkD;AAC9C,QAAMN,aAAa,GAAG,MAAMP,MAAM,CAAEc,KAAD,IAA6BA,KAAK,CAACC,YAAN,CAAmBR,aAAjD,CAAlC;AACA,QAAMa,oBAAoB,GAAGb,aAAa,CAACe,MAAd,CAAsBP,YAAD,IAAoCA,YAAY,CAACQ,GAAb,IAAkBV,OAAO,CAACU,GAAnF,CAA7B;AACA,QAAM3B,IAAI,CAACK,GAAG,CAACuB,MAAL,EAAaX,OAAO,CAACU,GAArB,CAAV;AACA,QAAMxB,GAAG,CAACG,uBAAuB,CAACkB,oBAAD,CAAxB,CAAT;AACH;;AAED,eAAevB,GAAG,CAAC,CACfC,UAAU,CAACK,iBAAiB,CAACsB,yBAAnB,EAA8CrB,gBAA9C,CADK,EAEfN,UAAU,CAACK,iBAAiB,CAACuB,wBAAnB,EAA6Cd,eAA7C,CAFK,EAGfd,UAAU,CAACK,iBAAiB,CAACwB,2BAAnB,EAAgDN,kBAAhD,CAHK,CAAD,CAAlB","sourcesContent":["import { call, all, takeLatest, put, select } from 'redux-saga/effects'\nimport api from '../../../services/api'\n\nimport { getInvestimentosSuccess} from './actions'\nimport { AnyAction } from 'redux'\n\nimport { ApplicationState } from '../../index'\n\nimport { InvestimentoTypes, InvestimentoData } from './types'\n\nfunction* getInvestimentos() {\n    const investimentosData = yield call(api.get, '')\n    const investimentos = JSON.parse(investimentosData.data.body)\n    yield put(getInvestimentosSuccess(investimentos))\n}\n\nfunction* addInvestimento({payload}: AnyAction){\n    const investimentos= yield select((state: ApplicationState) => state.investimento.investimentos)\n    const newInvestimento = {\n        opcao: payload.opcao,\n        valor: payload.valor,\n        data: payload.data\n    }\n\n    yield call(api.post, '', newInvestimento)\n\n    const updatedInvestimentos = [newInvestimento, ...investimentos]    \n    yield put(getInvestimentosSuccess(updatedInvestimentos))\n}\n\nfunction* removeInvestimento({payload}: AnyAction){\n    const investimentos = yield select((state: ApplicationState) => state.investimento.investimentos )\n    const updatedInvestimentos = investimentos.filter((investimento: InvestimentoData) => investimento._id!=payload._id)\n    yield call(api.delete, payload._id)\n    yield put(getInvestimentosSuccess(updatedInvestimentos))\n}\n\nexport default all([\n    takeLatest(InvestimentoTypes.GET_INVESTIMENTOS_REQUEST, getInvestimentos),\n    takeLatest(InvestimentoTypes.ADD_INVESTIMENTO_REQUEST, addInvestimento),\n    takeLatest(InvestimentoTypes.REMOVE_INVESTIMENTO_REQUEST, removeInvestimento),\n  ])"]},"metadata":{},"sourceType":"module"}